<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>职业兴趣 & 职业锚测评</title>

<style>
/* ============================================================
   Part 1：基础样式（App 通用风格）
   ============================================================ */
body {
  margin: 0;
  font-family: Arial, sans-serif;
  background: #f5f5f5;
}
#app {
  max-width: 640px;
  margin: auto;
  padding: 20px;
}
.card {
  background: #fff;
  padding: 22px;
  border-radius: 12px;
  margin-bottom: 20px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.07);
}
.btn {
  background: #4CAF50;
  color: white;
  padding: 12px 16px;
  border: none;
  border-radius: 8px;
  cursor: pointer;
}
.btn:disabled {
  background: #ccc;
}
.option {
  padding: 12px;
  border-radius: 8px;
  margin: 10px 0;
  cursor: pointer;
}
</style>
</head>

<body>
<div id="app"></div>

<!-- ============================================================
   Part 2：测评题库（已检查无重复，保持原样）
   ============================================================ -->
<script>
const questions = [
  { type: "R", text: "我喜欢使用工具或机器完成任务。" },
  { type: "R", text: "相比办公室工作，我更喜欢动手操作。" },
  { type: "R", text: "我擅长修理或手工制作。" },
  { type: "R", text: "我喜欢户外活动或体力任务。" },
  { type: "R", text: "我更喜欢实际、具体的工作。" },
  { type: "R", text: "我喜欢按照流程完成任务。" },

  { type: "I", text: "我喜欢思考复杂问题。" },
  { type: "I", text: "我享受探索事物背后的原理。" },
  { type: "I", text: "我擅长分析数据或信息。" },
  { type: "I", text: "我喜欢独立思考，而不是执行任务。" },
  { type: "I", text: "我对新知识充满好奇。" },
  { type: "I", text: "我更喜欢逻辑和推理类任务。" },

  { type: "A", text: "我喜欢创造性的工作方式。" },
  { type: "A", text: "我对设计、艺术或表达感兴趣。" },
  { type: "A", text: "我喜欢自己决定工作方式，不受限制。" },
  { type: "A", text: "我对审美和创意有敏感度。" },
  { type: "A", text: "我喜欢尝试不同风格或新点子。" },
  { type: "A", text: "我在想象和表达方面有优势。" },

  { type: "S", text: "我喜欢帮助别人解决问题。" },
  { type: "S", text: "我能体会他人的情绪和想法。" },
  { type: "S", text: "我喜欢与人沟通交流。" },
  { type: "S", text: "我享受指导、培训或辅导他人。" },
  { type: "S", text: "我希望我的工作能帮助他人发展。" },
  { type: "S", text: "我适合在团队氛围良好的地方工作。" },

  { type: "E", text: "我喜欢制定计划和推动事情进展。" },
  { type: "E", text: "我喜欢影响、说服或带领他人。" },
  { type: "E", text: "我愿意承担责任并做决策。" },
  { type: "E", text: "我喜欢竞争、挑战和追求成果。" },
  { type: "E", text: "我适合需要沟通和协调的工作。" },
  { type: "E", text: "我喜欢创立、组织或管理项目。" },

  { type: "C", text: "我擅长整理、记录或处理细节。" },
  { type: "C", text: "我喜欢有结构、稳定的工作环境。" },
  { type: "C", text: "我习惯按流程、规则完成任务。" },
  { type: "C", text: "我喜欢管理文档、表格或数据。" },
  { type: "C", text: "我做事细致、有条理。" },
  { type: "C", text: "我喜欢可预测的任务，而非不确定性。" },

  { type: "TF", text: "我希望我的工作能体现专业技能价值。" },
  { type: "TF", text: "我愿意花时间钻研某项技能做到最好。" },
  { type: "TF", text: "我认为专业能力比职位更重要。" },

  { type: "GM", text: "我希望未来能管理团队或项目。" },
  { type: "GM", text: "我喜欢协调资源、推动决策。" },
  { type: "GM", text: "我适合承担更大责任。" },

  { type: "AU", text: "我希望工作方式由我自己决定。" },
  { type: "AU", text: "我不喜欢严格的流程束缚。" },
  { type: "AU", text: "我喜欢自由安排时间和任务。" },

  { type: "SE", text: "我重视工作稳定性。" },
  { type: "SE", text: "我偏好长期可预期的职业路径。" },
  { type: "SE", text: "我在稳定环境里更能发挥。" },

  { type: "CE", text: "我喜欢从零开始创造一个项目。" },
  { type: "CE", text: "我有创业或创新驱动力。" },
  { type: "CE", text: "我喜欢承担风险，尝试新机会。" },

  { type: "SV", text: "我希望我的工作能帮助他人。" },
  { type: "SV", text: "我重视工作的社会意义。" },
  { type: "SV", text: "我愿意为了他人的利益付出努力。" },

  { type: "CH", text: "我喜欢克服困难和挑战。" },
  { type: "CH", text: "我对艰难目标充满动力。" },
  { type: "CH", text: "我希望不断验证自己的能力。" },

  { type: "LS", text: "我重视工作与生活的平衡。" },
  { type: "LS", text: "我不会为了工作牺牲生活质量。" },
  { type: "LS", text: "我希望工作能支持我的生活方式。" }
];
</script>


<!-- ============================================================
   Part 3：测评流程（上一题 / 下一题 + 无付费 + 无记录）
   ============================================================ -->
<script>
let currentIndex = 0;
let answers = [];

const scoresRIASEC = { R:0, I:0, A:0, S:0, E:0, C:0 };
const scoresAnchor = { TF:0, GM:0, AU:0, SE:0, CE:0, SV:0, CH:0, LS:0 };

function renderHome() {
  document.getElementById("app").innerHTML = `
    <div class="card">
      <h2>职业兴趣 & 职业锚测评</h2>
      <p>共 ${questions.length} 题，约 8-10 分钟完成。</p>
      <button class="btn" onclick="startTest()">开始测评</button>
    </div>
  `;
}

function startTest() {
  currentIndex = 0;
  answers = [];
  renderQuestion();
}

function renderQuestion() {
  const q = questions[currentIndex];
  const app = document.getElementById("app");
  const saved = answers[currentIndex] ?? null;

  app.innerHTML = `
    <div class="card">
      <h2>第 ${currentIndex + 1} / ${questions.length} 题</h2>
      <p>${q.text}</p>

      ${[5,4,3,2,1].map(score => `
        <div class="option" 
          onclick="selectOption(${score})"
          style="border:${saved===score?'2px solid #4CAF50':'1px solid #ccc'}">
          ${score} 分
        </div>
      `).join("")}

      <div style="display:flex; gap:12px; margin-top:20px;">
        <button class="btn" onclick="prev()" ${currentIndex===0?'disabled':''}>
          上一题
        </button>

        <button class="btn" onclick="next()">
          ${currentIndex === questions.length - 1 ? "提交" : "下一题"}
        </button>
      </div>
    </div>
  `;
}

function selectOption(v) {
  answers[currentIndex] = v;
  renderQuestion();
}
function prev() {
  if (currentIndex > 0) currentIndex--;
  renderQuestion();
}
function next() {
  if (!answers[currentIndex]) {
    alert("请选择一个选项");
    return;
  }
  if (currentIndex < questions.length - 1) {
    currentIndex++;
    renderQuestion();
  } else {
    calculate();
  }
}

/* ============================================================
   计算得分
   ============================================================ */
function calculate() {
  for (let i=0; i<questions.length;i++) {
    const q = questions[i];
    const v = answers[i];

    if (scoresRIASEC[q.type] !== undefined) scoresRIASEC[q.type] += v;
    if (scoresAnchor[q.type] !== undefined) scoresAnchor[q.type] += v;
  }
  renderReport();
}


/* ============================================================
   Part 4：最终报告（免费开放）
   ============================================================ */
function renderReport() {
  const app = document.getElementById("app");

  const topRIASEC = Object.entries(scoresRIASEC)
    .sort((a,b)=>b[1]-a[1])
    .slice(0,3)
    .map(v=>v[0])
    .join("");

  const topAnchor = Object.entries(scoresAnchor)
    .sort((a,b)=>b[1]-a[1])[0][0];

  app.innerHTML = `
    <div class="card">
      <h2>测评完成！</h2>
      <p>你的 RIASEC 三字码：<strong>${topRIASEC}</strong></p>
      <p>你的主要职业锚：<strong>${topAnchor}</strong></p>

      <button class="btn" onclick="exportPDF()">导出 PDF 报告</button>
      <button class="btn" onclick="renderHome()">返回首页</button>
    </div>
  `;
}


/* ============================================================
   Part 5：导出 PDF（可扩展）
   ============================================================ */
function exportPDF() {
  alert("这里可以加入 PDF 导出插件，例如 html2pdf.js");
}


/* ============================================================
   Part 6：无付费/无加微信 → 已完全删除
   ============================================================ */


/* ============================================================
   Part 7：初始化
   ============================================================ */
renderHome();
</script>

</body>
</html>
